(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(t,e,n){t.exports=n(29)},28:function(t,e,n){},29:function(t,e,n){"use strict";n.r(e);var a,o=n(0),r=n.n(o),i=n(12),s=n.n(i),c=n(2),u=n(4),l=n(6),d=n(5),h=n(7),f=n(13),p=n.n(f),y=n(3),m=n(1),g=n.n(m),w={desktopSpacing:60,mobileSpacing:50},b=function(t,e,n,a){var o,r,i,s,c,u;return function(t,e,n,a){if("number"!==typeof t)throw new Error("improper parameter ".concat(t," passed to getOrthogonalKey function"));if("number"!==typeof e)throw new Error("improper parameter ".concat(e," passed to getOrthogonalKey function"));if("number"!==typeof n)throw new Error("improper parameter ".concat(n," passed to getOrthogonalKey function"));if("number"!==typeof a)throw new Error("improper parameter ".concat(a," passed to getOrthogonalKey function"))}(t,e,n,a),t===n?(s=i=(o=a>e?a:e)-(r=(o-(a!==o?a:e))/2),c=t-r,u=t+r):(c=u=(o=n>t?n:t)-(r=(o-(n!==o?n:t))/2),s=e-r,i=e+r),"".concat(c.toString(),".").concat(s.toString(),".").concat(u.toString(),".").concat(i.toString())},v=function(t){for(var e=t,n=t.length-1;n>0;n-=1){var a=Math.floor(Math.random()*(n+1)),o=t[n];e[n]=t[a],e[a]=o}return e},x=function t(e){var n=e.x,a=e.y,o=e.isStart,r=e.isDest,i=e.disoveredBy;Object(c.a)(this,t),this.key="".concat(+n,".").concat(+a),this.isVisited=!1,this.isDest=r,this.isStart=o,this.distFromStart=0,this.discoveredBy=i,this.siblingKeys=[]},S=n(8),O=n(9),E=n.n(O),N=n(16),k=n(14),M=n.n(k);var j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a){var e=Object(N.a)({wildcard:!0,delimiter:"::",newListener:!1,maxListeners:0,verboseMemoryLeak:!0},t);a=new M.a(e)}return a}(),K={MAZEGAME:{GAMESTART:"MZGAME::START",DESTFOUND:"MZGAME::DESTFOUND",GAMEOVER:"MZGAME::GAMEOVER"}};j.on(K.MAZEGAME.DESTFOUND,function(t,e){console.log("".concat(K.MAZEGAME.DESTFOUND," Event Fired")),console.log(t),e(t)});var D=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(l.a)(this,Object(d.a)(e).call(this,t))).gohome=function(t){var e=t.x,n=t.y,a=t.self,o=t.graph;a.cooldown=!0,a.keyboardCoolDown=!0,E.a.animate({e:o.current,p:{rotateZ:"-=1440"},o:{duration:1500}}),setTimeout(function(){E.a.animate({e:a.userNodeRef.current,p:{cx:e,cy:n,completion:function(){a.cooldown=!1,a.keyboardCoolDown=!1,a.x=e,a.y=n}},o:{duration:750}})},1550)},n.keyboardListener=function(t){if(!n.cooldown&&!n.keyboardCoolDown)switch(console.log("keyboard input detected. e.which = ".concat(t.which)),setTimeout(function(){n.keyboardCoolDown=!0,setTimeout(function(){n.keyboardCoolDown=!1},250)},0),t.which){default:case 38:case 87:return n.move({y:-n.offset});case 40:case 83:return n.move({y:n.offset});case 39:case 68:return n.move({x:n.offset});case 37:case 65:return n.move({x:-n.offset})}},n.maybeKeepMoving=function(t,e){var a=Object.keys(n.nodeMap[t]);if(2===a.length){var o=null;a.forEach(function(t){t!==e&&(o=t)});var r=o.split("."),i=Object(y.a)(r,2),s=i[0],c=i[1],u=t.split("."),l=Object(y.a)(u,2),d=l[0],h=l[1];s!==d?n.move({x:+s<+d?-n.offset:n.offset}):n.move({y:+c<+h?-n.offset:n.offset})}n.cooldown=!1},n.move=function(t){var e="".concat(n.x,".").concat(n.y),a=(t.x||0)+n.x,o=(t.y||0)+n.y,r="".concat(a,".").concat(o),i=Object(S.a)(n);if(n.nodeMap[e][r]){E.a.animate({e:i.userNodeRef.current,p:{cx:a,cy:o,completion:function(){i.x=a,i.y=o,r===i.destNodeKey?j.emit(K.MAZEGAME.DESTFOUND,{x:i.startX,y:i.startY,self:i,graph:i.mzGraphRef},i.gohome):i.maybeKeepMoving(r,e)}},o:{duration:50,easing:"linear"}})}},n.componentDidMount=function(){n.x=n.props.cx,n.y=n.props.cy,n.startNodeKey="".concat(n.x,".").concat(n.y),n.startX=parseInt(n.x,10),n.startY=parseInt(n.y,10),n.r=n.props.r,n.destNodeKey=n.props.destnodekey,n.map=n.props.map,n.offset=n.props.offset,n.props.handleswipebindings(n.keyboardListener),n.userNodeRef.current.focus()},n.componentDidUpdate=function(){n.props.map.forEach(function(t){var e={};t.siblingKeys.forEach(function(t){return e[t]=1}),n.nodeMap[t.key]=e}),n.destNodeKey=n.props.destnodekey,n.mzGraphRef=n.props.mzgraphref},n.render=function(){return r.a.createElement("circle",{ref:n.userNodeRef,onKeyDown:function(t){return n.keyboardListener(t)},onBlur:function(){n.userNodeRef.current.focus()},className:"mz-node user-node",cx:n.x,cy:n.y,r:n.r,tabIndex:"0"})},n.userNodeRef=r.a.createRef(),n.nodeMap={},n.cooldown=!1,n.keyboardCoolDown=!1,n.mzGraphRef=null,n}return Object(h.a)(e,t),e}(r.a.Component),C=function(){function t(){var e=this;Object(c.a)(this,t),this.buildNodeArray=function(t){for(var e=t.rows,n=t.cols,a=t.spacing,o=[],r=a/2,i=0;i<n;i+=1)for(var s=0;s<e;s+=1){var c=i*a+r,u=s*a+r,l=i+s===0,d=i===n-1&&s===e-1;o.push(new x({x:c,y:u,isStart:l,isDest:d,discoveredBy:""}))}return o},this.removeAllSiblings=function(t){t.forEach(function(t){t.siblingKeys=null})},this.addSiblings=function(t){for(var n,a,o,r,i=t.rows,s=t.cols,c=t.spacing,u=t.nodeArray,l=c,d=Math.round(l/2),h=0;h<s;h+=1)for(var f=0;f<i-1;f+=1)n=a=h*l,r=(o=f*l)+l,n+=d,a+=d,o+=d,r+=d,e.bindNodes(["".concat(n,".").concat(o),"".concat(a,".").concat(r)],u);for(var p=0;p<i;p+=1)for(var y=0;y<s-1;y+=1)o=r=p*l,a=(n=y*l)+l,n+=d,a+=d,o+=d,r+=d,e.bindNodes(["".concat(n,".").concat(o),"".concat(a,".").concat(r)],u);return u},this.bindNodes=function(t,e){var n=Object(y.a)(t,2),a=n[0],o=n[1],r=g.a.find(e,function(t){return t.key===a}),i=g.a.find(e,function(t){return t.key===o});r.siblingKeys.push(i.key),i.siblingKeys.push(r.key),r.siblingKeys=g.a.uniq(r.siblingKeys),i.siblingKeys=g.a.uniq(i.siblingKeys)}}return Object(u.a)(t,[{key:"getNodes",value:function(t){var e=t.rows,n=t.cols,a=t.spacing,o=this.buildNodeArray({rows:e,cols:n,spacing:a});return this.addSiblings({rows:e,cols:n,spacing:a,nodeArray:o})}}]),t}(),A=function(t){return r.a.createElement("circle",{className:"mz-node dest-node",cx:t.x,cy:t.y,r:t.r})},W=function t(e,n){Object(c.a)(this,t),this.nodeKeys=[e,n],this.id="".concat(e,".").concat(n),this.key=this.id;var a=this.id.split(".").map(function(t){return parseInt(t,10)}),o=Object(y.a)(a,4),r=o[0],i=o[1],s=o[2],u=o[3];this.crossWall=b(r,i,s,u)},F=function t(){Object(c.a)(this,t),this.getPathsWithRowsAndCols=function(t){for(var e,n,a,o,r=t.spacing,i=t.rows,s=t.cols,c=Math.round(r/2),u=[],l=0;l<s;l+=1)for(var d=0;d<i-1;d+=1)e=n=l*r,a=o=d*r,e+=n+=a+=o+=c,u.push(new W("".concat(e,".").concat(a),"".concat(n,".").concat(o)));for(var h=0;h<i;h+=1)for(var f=0;f<s-1;f+=1)e=f*r,a=o=h*r,n=f*r+r,e+=n+=n+=a+=o+=c,u.push(new W("".concat(e,".").concat(a),"".concat(n,".").concat(o)));return u},this.getPathsWithInactiveWalls=function(t){var e=t.excludeWalls;return g.a.map(e,function(t){var e=t.split("."),n=Object(y.a)(e,4),a=n[0],o=n[1],r=n[2],i=n[3],s=b(+a,+o,+r,+i).split("."),c=Object(y.a)(s,4);return a=c[0],o=c[1],r=c[2],i=c[3],new W("".concat(a,".").concat(o),"".concat(r,".").concat(i))})}},R=function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(o)))).state={x1:0,x2:0,y1:0,y2:0,css:"",length:0,pathKey:""},n.getPathKey=function(){var t=Math.round(n.state.length/2),e=n.state.x1+t,a=n.state.y1+t;if(n.state.x1===n.state.x2){var o=n.state.x1-t,r=n.state.y1+t;return"".concat(+o,".").concat(+r,".").concat(+e,".").concat(+a)}var i=n.state.x1+t,s=n.state.y1-t;return"".concat(+i,".").concat(+s,".").concat(+e,".").concat(+a)},n}return Object(h.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props,n=e.x1,a=e.y1,o=e.x2,r=e.y2,i=e.css,s=n===o?Math.round(r-a):Math.round(o-n);this.setState(function(){return{x1:n,y1:a,x2:o,y2:r,css:i,length:s,pathKey:""}}),this.setState(function(){return{pathKey:t.getPathKey()}})}},{key:"render",value:function(){return r.a.createElement("line",{id:this.props.id,className:"mz-wall",x1:this.props.x1,y1:this.props.y1,x2:this.props.x2,y2:this.props.y2})}}]),e}(r.a.Component),z=function t(){Object(c.a)(this,t),this.getWalls=function(t){for(var e,n,a,o,r=t.rows,i=t.cols,s=t.spacing,c=t.excludeWalls,u=[],l=1;l<=i-1;l+=1)for(var d=0;d<r;d+=1){e=a=l*s,n=d*s,o=parseInt(n+s,10);var h="".concat(e,".").concat(n,".").concat(a,".").concat(o);u.push({id:h,x1:e,y1:n,x2:a,y2:o})}for(var f=1;f<=r-1;f+=1)for(var p=0;p<i;p+=1){n=o=f*s,e=p*s,a=parseInt(e+s,10);var y="".concat(e,".").concat(n,".").concat(a,".").concat(o);u.push({id:y,x1:e,y1:n,x2:a,y2:o})}return Object(m.filter)(u,function(t){return!Object(m.includes)(c,t.id)})}},X=n(15),G=function(){function t(){Object(c.a)(this,t)}return Object(u.a)(t,[{key:"prepareLocalDataStore",value:function(t){var e=this;this.nodeMap={},this.route=[],this.destNodeKey="",this.maxDx=0,t.nodes.forEach(function(t){var n=JSON.parse(JSON.stringify(t)),a=Object(X.a)(t.siblingKeys);n.siblingKeys=v(a),n.discoveredBy=null,n.dXFromStart=0,e.nodeMap[t.key]=n}),this.startNode=g.a.find(this.nodeMap,function(t){return t.isStart}),this.startNode.isVisited=!0}},{key:"run",value:function(t){return this.prepareLocalDataStore(t),this.generateMazeWithDfs(),{route:this.route,destNodeKey:this.destNodeKey}}},{key:"updateCount",value:function(t){var e=this;t.siblingKeys.forEach(function(n){var a=e.nodeMap[n];a.dXFromStart=a.isVisited?a.dXFromStart:t.dXFromStart+1,a.dXFromStart>e.maxDx&&(e.maxDx=a.dXFromStart,e.destNodeKey=a.key)})}},{key:"updateNodeWithMaxDXFromStart",value:function(t){t.dXFromStart>this.maxDx&&(this.maxDx=t.dXFromStart,this.destNodeKey=t.key)}},{key:"generateMazeWithDfs",value:function(){var t=this,e=[];e.push(this.startNode);for(var n=function(){var n=e.pop();t.visit(n),t.updateCount(n),n.siblingKeys.forEach(function(a){t.nodeMap[a].isVisited||(t.nodeMap[a].discoveredBy=n.key,n.isStart?t.nodeMap[a].dXFromStart=1:n.isStart||(t.nodeMap[a].dXFromStart=n.dXFromStart+1),e.push(t.nodeMap[a]))})};e.length;)n()}},{key:"visit",value:function(t){if(!1===t.isVisited){t.isVisited=!0;var e=t.discoveredBy.split("."),n=Object(y.a)(e,2),a=n[0],o=n[1],r=t.key.split("."),i=Object(y.a)(r,2),s=i[0],c=i[1],u={x1:parseInt(a,10),y1:parseInt(o,10),x2:parseInt(s,10),y2:parseInt(c,10)},l=b(u.x1,u.y1,u.x2,u.y2);this.route.push(l)}}}]),t}(),I=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(l.a)(this,Object(d.a)(e).call(this,t))).componentDidMount=function(){n.setState(function(t,e){return{cols:Math.floor(.8*e.width/t.spacing),rows:Math.floor(.8*e.height/t.spacing),currentLevel:n.currentLevel||1}}),n.setState(function(t){return{width:t.spacing*t.cols,height:t.spacing*t.rows}}),n.setState(function(t){return{nodes:(new C).getNodes(t)}}),n.setState(function(t){var e=(new G).run(t),n=e.destNodeKey.split("."),a=Object(y.a)(n,2),o=a[0],r=a[1];return{excludeWalls:e.route,destNodeX:o,destNodeY:r}}),n.setState(function(t){return{walls:(new z).getWalls(t)}},function(){n.setState(function(t){return{allPaths:(new F).getPathsWithInactiveWalls(t)}},function(){n.updateSiblingsUsingPaths()})})},n.updateSiblingsUsingPaths=function(){var t=JSON.parse(JSON.stringify(n.state.nodes));t.forEach(function(t){t.siblingKeys=[]}),n.state.allPaths.forEach(function(e){var n=Object(y.a)(e.nodeKeys,2),a=n[0],o=n[1],r=g.a.find(t,function(t){return t.key===a}),i=g.a.find(t,function(t){return t.key===o});r&&i&&(r.siblingKeys.push(i.key),i.siblingKeys.push(r.key),r.siblingKeys=g.a.uniq(r.siblingKeys),i.siblingKeys=g.a.uniq(i.siblingKeys))}),n.setState(function(e,n){return{nodes:t}})},n.getUserControlNode=function(){return r.a.createElement(D,{cx:Math.round(w.desktopSpacing/2),cy:Math.round(w.desktopSpacing/2),r:Math.round(.1*w.desktopSpacing),map:n.state.nodes,destnodekey:"".concat(n.state.destNodeX,".").concat(n.state.destNodeY),offset:w.desktopSpacing,mzgraphref:n.mazeGraphRef,handleswipebindings:n.props.handleswipebindings})},n.getInnerWalls=function(){return n.state.walls.map(function(t){var e=t.id,n=t.x1,a=t.y1,o=t.x2,i=t.y2;return r.a.createElement(R,{key:e,id:e,x1:n,y1:a,x2:o,y2:i,className:"mz-wall insidewall"})})},n.getOutterWalls=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{x1:0,y1:0,x2:0,y2:n.state.height,className:"outsidewall"}),r.a.createElement(R,{x1:0,y1:0,x2:n.state.width,y2:0,className:"outsidewall"}),r.a.createElement(R,{x1:n.state.width,y1:0,x2:n.state.width,y2:n.state.height,className:"outsidewall"}),r.a.createElement(R,{x1:0,y1:n.state.height,x2:n.state.width,y2:n.state.height,className:"outsidewall"}))},n.render=function(){return r.a.createElement("div",{ref:n.mazeGraphRef},r.a.createElement("svg",{width:n.state.width,height:n.state.height,id:"mz-svg"},n.getOutterWalls(),n.getInnerWalls(),n.getUserControlNode(),r.a.createElement(A,{x:n.state.destNodeX,y:n.state.destNodeY,r:Math.round(.1*w.desktopSpacing)})))},n.state={height:n.props.height,width:n.props.width,spacing:w.desktopSpacing,cols:0,rows:0,nodes:null,allPaths:[],walls:[],excludeWalls:[],destNodeX:0,destNodeY:0},n.mazeGraphRef=r.a.createRef(),n}return Object(h.a)(e,t),e}(r.a.Component),T=function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(o)))).refreshMaze=function(){window.location.reload()},n.render=function(){return r.a.createElement("div",{className:"three ui buttons"},r.a.createElement("button",{type:"button",className:"massive ui inverted violet icon button"},r.a.createElement("i",{className:"large flag checkered icon"})),r.a.createElement("button",{onClick:n.refreshMaze,type:"button",className:"massive ui inverted purple icon button"},r.a.createElement("i",{className:"large vertically flipped recycle icon"})),r.a.createElement("button",{type:"button",className:"massive ui inverted teal icon button"},r.a.createElement("i",{className:"large ellipsis horizontal icon"})))},n}return Object(h.a)(e,t),e}(o.Component),P=function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(o)))).cooldown=!1,n.state={},n.componentDidMount=function(){n.setState({windowHeight:window.innerHeight,windowWidth:window.innerWidth})},n.handleSwipeBindings=function(t){t&&!n.state.synthClick&&n.setState({synthClick:t})},n.handleCoolDown=function(){n.cooldown=!0,setTimeout(function(){n.cooldown=!1},250)},n.getSwipeProps=function(){return{onSwipeUp:function(){n.cooldown||(n.handleCoolDown(),n.state.synthClick({which:38}))},onSwipeDown:function(){n.cooldown||(n.handleCoolDown(),n.state.synthClick({which:40}))},onSwipeLeft:function(){n.cooldown||(n.handleCoolDown(),n.state.synthClick({which:37}))},onSwipeRight:function(){n.cooldown||(n.handleCoolDown(),n.state.synthClick({which:39}))},onSwipeMove:function(){return!0},allowMouseEvents:!0}},n}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,this.getSwipeProps(),r.a.createElement(I,{className:"mz-container",height:this.state.windowHeight,width:this.state.windowWidth,handleswipebindings:this.handleSwipeBindings})),r.a.createElement(T,null))}}]),e}(r.a.Component),L=function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return r.a.createElement(P,null)}}]),e}(r.a.Component),U=(n(28),function(){return r.a.createElement("div",{className:"column"},r.a.createElement(L,null))});s.a.render(r.a.createElement(U,null),document.querySelector("#root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.673a05aa.chunk.js.map